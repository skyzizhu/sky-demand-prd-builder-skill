---
name: sky-demand-prd-builder-skill
description: 生成标准化的 PRD 草稿与数据/埋点方案草稿，并标出需要人工补充的关键项，为后续导出 PDF 做结构准备。既支持基于 sky-demand-evaluator 的真需求结果自动生成，也支持用户直接输入产品需求描述后生成 PRD（此时自动增加更多 TODO 以提示先完善或评估）。
---

# 使用说明

本 skill 用于把一条「已经被提出的产品需求」，推进到「可执行的 PRD 草稿 + 数据/埋点与监控草稿」，并清晰标出哪些部分需要产品/设计/技术/运营人工补充。  

它支持两条主要入口路径：

- 路径 A：用户直接输入产品需求/场景描述（无需先跑真伪评估），本 skill 会基于当前信息尽可能生成 PRD 骨架，并用 TODO 标记信息缺口和待评估点；  
- 路径 B：当前需求已经通过 `sky-demand-evaluator` 评估为真需求且实施推荐度 > 50%，本 skill 直接基于该结构化输出生成更完整的 PRD 草稿。  

本 skill 不直接负责生成 PDF 文件，但会：

- 输出结构化、分章节的 PRD 文本草稿；  
- 使用清晰的标题与层级组织内容，方便后续交由 `pdf` 能力做排版与导出。  

## 0. 依赖与前置条件

本 skill 有两类上游输入来源，对前置条件要求不同：

- 情况 1（直接从用户需求生成）：  
  - 用户直接提供一段或多段「产品需求/问题/场景」描述，可能尚未经过系统化评估；  
  - 本 skill 应在不阻断用户的前提下，直接生成一个结构化 PRD 草稿骨架；  
  - 如明显缺少关键信息（目标、用户、约束、数据口径等），使用统一的 TODO 标记出来，并在适当位置提示「建议后续使用 `sky-demand-evaluator` 进行真伪和优先级评估」。  

- 情况 2（基于真需求结果生成）：  
  - 当前需求已经通过 `sky-demand-evaluator` 评估，结论为：  
    - 真需求；且  
    - 实施推荐度评分 > 50%；  
  - 已有可用的 `sky-demand-evaluator` 结构化输出，或一份信息等价的整理内容；  
  - 本 skill 可依赖这些结构化信息，生成更丰富、TODO 更少的 PRD 草稿。  

如收到的输入既不像结构化评估结果、又明显不足以支撑任何 PRD 草稿（例如只有一句非常模糊的吐槽），则可以先尝试通过追问或 TODO 方式补齐最基本的背景与目标；若仍然不足，则温和提示用户先澄清需求（可建议使用 `sky-demand-evaluator`），再重新调用本 skill。

本 skill 有两种主要使用模式：**生成模式** 和 **自检模式**。生成模式本身内部包含两种入口：直接从需求描述生成（情况 1）和从真需求评估结果生成（情况 2）。

### 0.1 生成模式（默认）

生成模式用于「从需求生成 PRD 草稿」，包含两种典型入口：

- 入口 A：直接从需求描述生成骨架 PRD  
  - 输入是一段或多段自然语言的产品需求/问题/场景描述；  
  - skill 需要先在内部做一次轻量的结构化梳理（识别角色、场景、目标、可能的关键路径），然后按后文章节结构生成 PRD；  
  - 对于缺失的信息（例如尚未有明确指标、数据口径、风险评估等），统一用 TODO 标记，并在 TODO 文本中尽量写清楚「需要什么信息」而不是简单写“待补充”；  
  - 如判断该需求风险较高或不够清晰，可以在合适的位置建议用户考虑使用 `sky-demand-evaluator` 进一步评估，但不应直接拒绝生成。  

- 入口 B：基于 `sky-demand-evaluator` 真需求结果生成完整 PRD  
  - 已通过 `sky-demand-evaluator` 的真需求结论且实施推荐度 > 50%；  
  - 本入口接受两种输入形式：  
    - 形式 B1：直接传入完整的 `sky-demand-evaluator` 输出（推荐）；  
    - 形式 B2：传入一份等价的结构化信息，至少包含：  
      - 需求结论标签（真需求）；  
      - 实施推荐度评分；  
      - 背后问题与用户目标；  
      - 需求类型标签；  
      - 关键判断依据（价值/频率/范围/可替代性/一致性）；  
      - 用户故事与关键用户路径；  
      - 价值 vs 成本评估；  
      - 初步数据与埋点建议。  
  - 在这种入口下，skill 应尽量减少“泛泛而谈”的空话，多引用上游分析结果中的具体判断和结论，只在确实缺信息的地方保留 TODO。  

无论来自入口 A 还是入口 B，如输入信息明显不全，在生成 PRD 草稿时都要增加相应的 TODO 标记，并保持 TODO 语句足够具体，便于后续人工补充。

### 0.2 自检模式（可选）

自检模式用于「对一份已有的 PRD 文档进行结构化检查与补洞」，而不是从零生成。触发方式包括：

- 用户明确说明「这是已经写好的 PRD，请帮忙按 sky-demand-prd-builder-skill 自检」；  
- 或输入主要是一份 PRD 文本，而不是 sky-demand-evaluator 的输出。

在自检模式下，本 skill 应：

- 对照本 skill 的章节结构，检查用户提供的 PRD：  
  - 哪些章节已覆盖（例如：背景与目标、用户与场景、数据与埋点等）；  
  - 哪些章节缺失或内容明显不足。  
- 检查是否包含至少若干：  
  - 清晰的目标和可度量指标；  
  - 用户故事和关键用户路径；  
  - 埋点事件与指标设计；  
  - 验收用例（用例数量和覆盖范围）。  
- 输出一份「自检报告」，而不是重写整个 PRD，报告内容可以包括：  
  - 缺失或薄弱的章节清单；  
  - 建议补充的内容要点（可以用 TODO 形式列出）；  
  - 如发现与前一个 skill（sky-demand-evaluator）结论明显不一致的地方，可以提示需要回到真伪评估阶段复查。

在自检模式下，如用户允许，可以在原有 PRD 的基础上追加一个「改进建议」小节，列出：  

- TODO(产品/设计/技术/数据…): 应补充的关键信息；  
- 建议统一引入的结构（例如增加验收用例章节、增加监控设计章节等）。

## 1. 整理需求摘要与目标

### 1.0 PRD 元信息

在正式展开内容前，先生成一块「元信息」区域，方便 PRD 直接被复制到需求管理系统或协作文档中。建议包含但不限于：

- 需求名称（自动生成一版，允许人工修改）；  
- 需求 ID（由团队系统生成，保留 `TODO(产品)` 占位）；  
- 当前版本号（例如 v0.1 草稿）；  
- Owner（产品负责人）；  
- 参与角色（设计、技术负责人、数据、运营等）；  
- 目标版本 / 预计上线时间；  
- 关联项目 / 关联 OKR（如适用）。  

如缺乏信息，使用统一格式的 TODO 标记，例如：

- `TODO(产品 P0): 填写需求 ID（对应 Jira/飞书多维表的主键）。`  
- `TODO(产品 P1): 填写目标版本号及预计上线时间。`

### 1.1 生成需求一句话摘要

基于输入信息，先生成一条「需求一句话摘要」，要求：

- 覆盖核心对象、场景和目标，不展开具体方案；  
- 不超过 1–2 句。  

示例格式：

- 「为【用户/角色】在【场景】下提供【能力/改进】，以提升【关键目标/指标】。」  

### 1.2 生成背景与目标初稿

当上游输入来自 `sky-demand-evaluator` 时，可以综合其分析结果；当上游仅是一段需求描述时，则需基于该描述进行合理归纳与假设，并用 TODO 标记不确定之处。整体要求如下：

- 背景：  
  - 简要说明当前产品现状、存在的问题或机会（可引用「背后问题与用户目标」）；  
  - 结合需求类型标签（如体验优化/商业化等）给出 1 段背景描述。  

- 目标：  
  - 将需求目标拆成 1–3 条可验证的目标，参考：  
    - 对用户体验的改善（例如：减少中断、缩短路径、降低错误等）；  
    - 对业务指标的影响（例如：登录成功率、留存、转化率等）。  
  - 如缺乏明确指标，在目标中加入 TODO，例如：  
    - `TODO(业务): 补充本需求期望改善的具体指标及目标值（例如：首登完成率+X%）。`

### 1.3 问题陈述与关键假设

在背景与目标基础上，应显式写出本需求试图解决的「核心问题」以及若干可被验证/证伪的「关键假设」，为后续指标、实验设计和复盘提供锚点。

- 问题陈述：  
  - 用 1–2 句话概括当前最核心的问题/痛点（可以引用 `sky-demand-evaluator` 中的「背后问题与用户目标」）；  
  - 避免直接把方案当问题（例如「没有 XX 功能」），而是描述用户/业务的真实困境。  
- 关键假设（1–3 条）：  
  - 每条假设建议使用「如果…那么…从而…」或「因为…所以…」结构；  
  - 尽量与后文的核心指标、用户行为或业务结果挂钩；  
  - 区分「用户行为假设」（用户会怎么用）和「业务结果假设」（指标会怎样变化）更佳。  

当输入来自 `sky-demand-evaluator` 时，可直接从其输出中抽取或改写问题与假设；当仅有一段需求描述时，则根据描述做合理归纳，并在不确定处补充 TODO：

- `TODO(产品/数据): 确认上述关键假设是否与当前业务判断一致，如有明显分歧需先在评审中对齐。`

### 1.4 收集约束条件与依赖

如 `sky-demand-evaluator` 中提及风险、依赖或重要假设，应在本节归纳为：

- 已知约束：如平台限制、合规要求、性能边界等；  
- 关键依赖：如其他团队、上游接口、第三方服务等。  

如相关信息缺失，输出：

- `TODO(产品): 补充该需求的主要依赖模块/团队（如有）。`  
- `TODO(合规/法务): 确认本需求是否涉及隐私、合规或审核风险。`

## 2. 用户与使用场景

### 2.1 用户画像与角色

基于 `sky-demand-evaluator` 的用户角色信息：

- 列出主要目标用户（例如：新手用户、重度使用者、运营人员、渠道伙伴等）；  
- 对每类目标用户给出 1–2 句简要描述，说明其关心点与典型行为。  

如输入中未体现用户角色，输出：

- `TODO(产品): 明确本需求主要服务的用户角色（例如：新用户/老用户/B 端某角色等）。`

### 2.2 使用场景描述

复用并细化 `sky-demand-evaluator` 中的使用场景与 Job story：

- 以 2–3 个关键场景为主，每个场景包含：  
  - 场景名称；  
  - 简短描述；  
  - 对应的 Job story（当我…时，我想要…从而…）。  

### 2.3 关键用户路径

基于已有的关键使用路径，整理出标准化的「主路径」：

- 使用 4–7 个节点描述用户从进入到完成任务的主要步骤；  
- 对每个节点标注：  
  - 所属页面/模块（如已知）；  
  - 该节点的目标或关键动作。  

如存在多个明显不同路径（如新/老用户不同），可区分「主要路径」与「替代路径」。

## 3. 需求范围与分层

### 3.1 功能清单与范围

根据前一个 skill 的价值评估与关键节点，列出本需求下的核心功能点：

- Must（必须）：需求成立的前提能力，不做就无法交付基本价值；  
- Should（重要）：明显提升体验或效果，优先考虑但允许在资源不足时延期；  
- Could（可选）：锦上添花项，可视资源和节奏选择性实现。  

如信息不足以直接划分，可给出建议划分，并在描述中注明基于哪些判断。

### 3.2 MVP 与迭代建议

结合实施推荐度评分和成本评估：

- 给出一个建议的 MVP 范围（只包含 Must + 少量高价值 Should）；  
- 建议后续迭代方向（例如：适配更多场景、增加智能化、增加个性化等）。  

必要时添加：

- `TODO(产品/业务): 和业务方确认本次版本的范围边界与时间要求。`

## 4. 方案设计（概要）

本 skill 不输出高保真原型，但要给出足够让设计/开发理解的方案概要，并在信息较完整且与本需求类型相关时，提供合适的结构化视图（例如功能架构图、关键流程图等），而不是强制所有需求都包含所有类型的图。

在上游信息较丰富（例如已有较完整的需求描述、sky-demand-evaluator 输出或已整理的模块/流程说明），且该需求**确实涉及相应层面的设计**时，可以考虑：

- 补充一份功能架构/模块分层视图（哪几个模块、如何分层、相互关系）；  
- 补充若干关键流程/状态流转视图（核心路径、重要异常路径）；  
- 同时保留文字说明，方便在纯文本环境中阅读。  

如当前信息不足以画出完整图，可先输出「图的骨架结构」+ TODO；如某类视图对本需求明显不适用或没有实际价值，可以不输出该视图，仅在必要时用一句简要说明或 TODO 标记（例如说明“本需求不涉及系统架构变化，仅为已有模块的小范围配置调整”）。

### 4.1 功能架构与模块关系（结构/图示）

从「需求范围与分层」出发，整理本需求涉及的功能架构和模块关系，重点包括：

- 按层级或域划分模块（例如：入口层 / 业务逻辑层 / 数据与服务层 / 配置与运营后台等）；  
- 标注模块间的主要依赖关系（谁调用谁、关键数据流向）；  
- 区分「新增模块」「改造模块」「复用模块」（如能判断）。  

在纯文本 PRD 中，可以用以下形式表达架构图思路：

- 分层列表，例如：  
  - 展示层：xxx 页面 / 组件；  
  - 业务层：xxx 服务 / 策略；  
  - 数据与配置层：xxx 表 / 配置中心 / 开关等。  
- 简化的结构图伪代码或 Markdown 结构，例如：  
  - 「入口 → 模块 A → 模块 B → 外部服务 C」；  
  - 或使用 Markdown/mermaid 风格的结构示意（如环境允许）。  

如缺乏足够信息确认模块边界或依赖，输出：

- `TODO(技术): 补充本需求涉及的系统/模块边界图，并确认新增/改造/复用的模块清单。`

### 4.2 关键流程与状态流转（流程图思路）

针对最重要的 1–3 条业务流程，输出「流程图的文字版草图」，覆盖：

- 正向主流程（用户从进入到完成目标的标准路径）；  
- 关键分支/判定节点（例如：权限校验、配置开关、配额/库存判断等）；  
- 重要状态变化（例如：订单状态、任务状态、开关状态）。  

推荐的表达方式包括：

- 按步骤列出「步骤 X → 步骤 Y → 步骤 Z」，并在每步后标注简要说明；  
- 如环境支持图形/mermaid，可补充一个简要的伪代码式流程图结构说明；  
- 对于复杂流程，可拆分为「用户视角流程」与「系统内部流程」两个小段。  

如输入只提供了非常粗略的路径信息，至少给出主流程骨架，并输出：

- `TODO(产品/技术): 基于现有系统梳理详细流程图（含异常路径），并在评审时对齐。`

### 4.3 核心流程说明（文字版）

围绕「关键用户路径」，补充每个节点的行为与系统响应（可与 4.2 的流程图思路呼应，提供更具体的文字说明）：

- 输入：用户在该节点可以做什么；  
- 输出：系统如何反馈（页面变化、提示、跳转等）；  
- 边界：此节点有哪些异常、失败情况需要处理（如超时、无数据等）。

如缺乏足够信息覆盖边界，输出：

- `TODO(交互): 补充各节点的异常/失败场景处理方式。`

### 4.4 页面与模块说明（文字版）

根据需求类型和路径，列出涉及的页面/模块：

- 对每个页面/模块，简要说明：  
  - 主要信息元素（有哪些核心信息或组件）；  
  - 主要交互元素（按钮/入口/输入框等）；  
  - 关键文案（可给出初稿，但建议标注待校对）。  

统一在文案部分添加：

- `TODO(文案): 核对并优化所有用户可见文案，确保符合品牌/语气规范。`

### 4.5 非功能性要求（如有）

如从前一 skill 中观察到性能、稳定性或安全相关的隐患，可以在此提出初步要求：

- 性能：响应时间、并发容量等粗略要求（如有）；  
- 稳定性：关键路径允许的失败率或重试策略（如有）；  
- 安全/合规：需要特别注意的数据或操作。  

如无法确定，输出：

- `TODO(技术): 根据当前系统架构补充性能/稳定性方面的约束与要求。`

## 5. 数据、埋点与监控设计

本章节是本 skill 的重点之一，用于帮助你从「想做」走向「可验证」。

### 5.1 指标体系（核心指标与辅助指标）

在参考 `sky-demand-evaluator` 中的监控建议基础上，输出：

- 核心指标（1–3 个）：  
  - 指标名称（例如：新用户首登完成率、某功能使用率等）；  
  - 指标说明（它衡量什么）；  
  - 指标类型：转化 / 频次 / 留存 / 质量 / 收入 等；  
  - 初步计算口径草稿（例如：分子/分母定义）。  

- 辅助指标（可选）：  
  - 帮助解释核心指标变化的指标，如曝光次数、点击率、错误率等。  

如指标定义不清晰，输出：

- `TODO(数据): 和数据团队确认各指标的精确定义与计算口径。`

### 5.2 埋点事件设计

按照「关键用户路径」节点，设计一张简化的埋点事件表。对每个关键节点，尽量给出：

- 事件名（建议有一定规范，如：`page_view_xxx` / `click_xxx` / `submit_xxx`）；  
- 触发条件（在哪个页面 / 哪个操作触发）；  
- 关键属性（例如：用户类型、入口来源、业务标识、错误码等）；  
- 用途（该事件用来回答什么问题，支撑哪个指标或假设）。  

如当前埋点体系已有类似事件，应在用途说明中提示「优先复用既有事件」。

如不确定现有埋点情况，输出：

- `TODO(数据/研发): 对照现有埋点文档，标记哪些事件可以复用，哪些需要新增。`

### 5.3 报表与仪表盘建议

给出一个高层级的报表/仪表盘草图，说明：

- 需支持的核心维度（时间、渠道、用户类型、版本号等）；  
- 主要图表形式（趋势图、漏斗、分布图等）；  
- 常用的筛选条件与对比方式（如对比上线前后、不同渠道等）。  

可加：

- `TODO(数据): 确认这些报表是否已有，若已有请记录报表链接；若没有，评估搭建成本与优先级。`

### 5.4 监控与告警（如适用）

如果该需求涉及关键路径（例如登录、支付、核心转化），需要考虑：

- 需要配置哪些指标的监控和告警；  
- 大致的告警阈值（如暂不确定，可留 TODO）。  

例如：

- `TODO(监控): 为核心转化指标配置告警，当转化率在日/小时维度上较基线下降超过 X% 时触发告警。`

### 5.5 灰度发布与实验设计（如适用）

当需求对核心指标有明显影响或存在体验/业务风险时，应在 PRD 中补充「灰度发布与实验设计」小节，至少包含：

- 发布策略：  
  - 是一次性全量发布，还是按比例/按渠道/按版本号灰度；  
  - 是否需要先走内部测试 / 试点用户 / 小流量白名单。  
- 实验设计（如采用 AB/多版本实验）：  
  - 实验单元（例如用户/账号/设备等）；  
  - 实验分组方式（例如 50% 对照组 + 50% 实验组，或多版本对比）；  
  - 主要观察的核心指标与保护指标（可直接引用 5.1 中指标）；  
  - 预估观测周期与样本量级（如不确定，可留 TODO）。  
- 回滚与应急预案：  
  - 确认是否有开关/配置可快速关闭；  
  - 回滚时对数据/实验结果的处理方式。  

如信息不足以设计完整实验方案，可输出：

- `TODO(产品/数据): 补充灰度/实验的具体策略（分流规则、实验单元、观察周期），并和数据团队确认可行性。`

### 5.6 上线后复盘计划

为避免「上线后就忘」，在 PRD 中应增加一个简要的「上线后复盘计划」小节，可以包括：

- 复盘时间点建议：  
  - 短期复盘（例如 T+7 / T+14，看短期行为和早期指标）；  
  - 中或长期复盘（例如 T+30 / T+60，看留存、收入等慢变量）。  
- 复盘关注点：  
  - 明确要重点看哪些核心指标/辅助指标的变化（引用 5.1、5.3）；  
  - 需要收集哪些定性反馈（例如用户访谈、客服/运营反馈、社媒评论等）。  
- 成功/失败判定标准（如暂无法量化，可给出定性的判断框架）：  
  - 例如「核心指标提升超过 X%，且未明显恶化保护指标，即视为成功」。  
- 复盘责任人和参与角色（产品/数据/运营/技术等）。  

如当前阶段无法确定复盘细节，可输出：

- `TODO(产品/业务): 补充本需求的上线后复盘计划（包含时间点、关注指标、参与角色）。`

## 6. 验收标准与用例（Use Cases）

为方便测试和验收，建议在 PRD 中增加一节「验收标准与用例」：

- 为 3–5 个关键场景各输出至少 1 条验收用例，结构包括：  
  - 前置条件（用户状态、环境、数据条件等）；  
  - 操作步骤；  
  - 预期结果（包含对页面表现、数据写入、埋点触发的期望）。  
- 对涉及异常/边界场景（如网络异常、广告加载失败等）也给出至少 1–2 条用例草稿。  

示例结构（文字即可，不必写成正式测试用例表格）：

- 用例 1：正常关闭开屏广告  
  - 前置条件：新用户首次冷启动 APP，开屏广告配置正常。  
  - 步骤：打开 APP → 等待开屏广告出现 → 点击右上角「关闭」。  
  - 预期结果：广告立即消失，进入首页；对应埋点事件 `ad_splash_close_click` 被记录。  

如信息不足以写出完整用例，可以添加：

- `TODO(QA/产品): 完善关键场景的验收用例列表，并与测试团队确认可执行性。`

## 7. 风险、依赖与 TODO 汇总

### 7.1 风险与应对

整合前文提到的风险点，例如：

- 体验上的风险（用户可能不理解、可能产生反感等）；  
- 技术或性能风险；  
- 合规与政策风险；  
- 项目进度与资源风险。  

对每个风险给出简要的应对思路或缓解措施，如目前无法评估，则留 TODO。

### 7.2 依赖与协作

列出本需求落地过程中涉及的主要依赖：

- 依赖的系统、团队、第三方服务等；  
- 需要对齐的关键决策（如定价、策略规则等）。  

### 7.3 TODO 汇总清单

把全文中出现的所有 `TODO(...)` 条目集中汇总成一个列表，按角色分类（产品/设计/技术/数据/运营等），并尽量带上优先级（例如 P0/P1/P2），方便使用者快速扫一遍知道哪里需要优先补充：

- TODO(产品 P0): ……  
- TODO(设计 P1): ……  
- TODO(技术 P0): ……  
- TODO(数据 P1): ……  
- TODO(运营 P2): ……  
- TODO(合规/法务 P0): ……  

## 8. 输出格式、MD 文件与 PDF 衔接

本 skill 的最终输出应为一份「结构化的 PRD 文本草稿」，采用 Markdown 作为唯一标准格式（single source of truth），并具有清晰的标题层级（例如类似 Markdown 的 `#`、`##`、`###`）。要求：

- 标题与章节结构稳定、易于识别，方便后续程序或工具进行分章节排版；  
- 所有 TODO 保持统一格式（例如：`TODO(角色 Px): 内容`），方便后续搜索和人工处理；  
- 所有「图形化内容」（功能架构图、流程图、状态图等）都应在 Markdown 中以**可机器解析的文本形式**表示：  
  - 优先使用 mermaid 风格代码块（如环境支持）；  
  - 或使用清晰的节点/连线列表（例如「节点 A → 节点 B → 节点 C」）；  
  - 避免只给出「见附件图」这类不可解析的描述。  
- 图表（如指标报表草图）可使用 Markdown 列表或表格给出字段/维度定义，而不是仅贴图片。  
- 在具备本地文件系统写入能力的环境中，应将上述 PRD 文本**自动写入一个 `.md` 文件**，并在回复中明确告知文件路径。  

关于自动输出 MD 文件，推荐约定如下（可根据实际项目调整）：

- 默认输出目录：当前工作目录下的 `output/prd/` 子目录；  
- 文件命名：基于需求名称生成一个简短的英文/拼音 slug，例如 `ad-close-button-prd.md`、`seckill-feature-prd.md`；  
- 在生成回答时，在结尾附上一句类似说明：  
  - 「本次 PRD 草稿已保存为 Markdown 文件：`output/prd/xxx-prd.md`。」  
- 若因环境限制无法写入文件，应在输出中明确说明，只返回文本不创建文件。

本 skill 不直接负责 PDF 排版，但应假定「Markdown 是内部标准真源，PDF/协作文档是对外呈现形式」。当用户需要对外呈现时，可以将该 Markdown 文本交由 `pdf` skill 或其他排版工具统一输出：

- 当用户明确表示需要 PDF 时，可以在输出中追加简要建议，例如：  
  - 「如需导出 PDF，请将上述 PRD 文本或 `output/prd/xxx-prd.md` 交由 `$pdf` 能力或相应工具，按照团队统一模板进行排版与导出。」

此外，如需求涉及多端或多环境（例如 iOS/Android/Web/管理后台等），在输出中应尽量：

- 在方案部分按端拆分小节（例如「4.4.1 iOS」「4.4.2 Android」），避免不同端的差异混杂在同一段落；  
- 在数据与埋点部分标注事件是否跨端复用，或需要按端区分。

## 9. 与 sky-demand-evaluator 的串联示例（简要）

### 9.1 触发方式与调用方式

- 当本需求满足以下特征之一时，**建议在 PRD 末尾追加一个或多个 `ai-wireframe` 区块，并在生成 PRD 后自动调用脚本生成 HTML 线框**：
  - 典型的界面/交互类需求（列表页、详情页、配置页、弹窗等）；  
  - 涉及信息架构或布局调整（入口位置变化、层级调整、模块组合等）；  
  - 涉及关键用户路径的明显变化（例如新增一个主要流程步骤或重排流程结构）。  
- 对于以下情况，一般**不需要生成界面线框**，除非业务方特别要求：  
  - 纯后端或纯数据计算类需求（只涉及算法、策略、定价计算等）；  
  - 仅新增/调整埋点、日志、监控的需求；  
  - 仅改动文案、小范围样式（例如只修改提示语、颜色微调），且不改变信息结构和交互路径；  
  - 完全在现有后台/控制台中复用既有界面的简单开关配置。  
- 在环境允许执行本地脚本时，应按如下方式调用：  
  - `python scripts/generate_ai_wireframes.py /path/to/prd.md`  
  - 脚本会扫描 PRD 中的 `ai-wireframe` 区块，并在与 PRD 同级目录下的相对路径位置生成对应的 `.html` 文件。

如运行环境不支持执行脚本，应在回答中说明「当前环境无法自动生成 HTML 线框」，但仍可以在 PRD 中输出 `ai-wireframe` 区块，供使用者在本地执行脚本。

### 9.2 `ai-wireframe` 区块约定（HTML 线框生成）

在 PRD 的末尾（建议放在 TODO 汇总之后），可以使用如下格式描述线框生成需求：

```markdown
```ai-wireframe
type: list_page
name: message_list_read_status
title: 信息列表已读/未读状态线框
output_path: wireframes/message-list-read-status.html
variant: mobile
notes: 用于展示未读亮色、已读浅灰的对比
image_url: https://example.com/path/to/illustration.png
```
```

- 字段含义：  
  - `type`：线框类型（当前支持 `list_page`、`detail_page` 等，可按页面类型扩展）；  
  - `name`：内部标识名称，用于 HTML `data-wireframe-name` 等；  
  - `title`：线框页面展示的标题（HTML `<title>` 与页内标题）；  
  - `output_path`：输出 HTML 文件相对 PRD 的路径，例如 `wireframes/xxx.html`；  
  - `variant`：可选，`mobile` 或 `web`，影响线框容器宽度与布局；  
  - `notes`：可选，线框说明文字，将显示在页面底部提醒使用者该线框的用途；  
  - `image_url`：可选，如提供，将在列表项左侧缩略图位置插入一张图片（例如示意插图/示例截图），由浏览器在打开 HTML 时加载；如远程图片不可用，则自动回退为本 skill 自带的占位图资源（例如 `assets/list-thumb-placeholder.jpeg`，以及纵向/横向通用占位图）。

在实际使用时，建议按照需求场景为 `image_url` 选择公开可访问、版权合规的示意图或图标（如来自开源图标库或官方素材），并由生成 PRD 的智能体根据需求语境为线框自动填充少量示例文字（如“示例未读标题一”“示例已读标题一”等），以增强可读性。

### 9.3 线框内容约定（图片与文字）

基于不同类型的 HTML 线框，建议具备如下元素：

- `list_page`：列表型页（信息流/列表入口页）  
  - 一个居中的页面容器（移动端或 Web 宽度），包含：  
    - 顶部状态栏 + 导航栏（使用占位块表示返回按钮、标题、右侧操作）；  
    - 若干列表项，其中每个列表项：  
      - 左侧为缩略图区域（使用 `image_url` 或默认的列表占位图 `list-thumb-placeholder.jpeg`）；  
      - 右侧为标题 + 时间两行示意文字（例如“示例未读标题一，文案略长截断展示”“今天 · 10:24”）；  
      - 未读列表项使用较亮背景（白底），已读列表项使用较浅灰背景，并通过文字颜色进一步弱化；  
    - 页尾的备注区域，用于展示 `notes` 字段内容（例如说明该线框用于对齐已读/未读区分）。  

- `detail_page`：详情页/内容页  
  - 一个居中的页面容器，包含：  
    - 顶部状态栏 + 导航栏（返回按钮、标题、右侧操作占位）；  
    - 可选的主图区域（使用 `image_url` 或默认纵向/横向占位图），用于模拟首屏主视觉或封面；  
    - 内容区域由若干条宽/窄不等的灰色“文本条”组成，模拟标题、meta 信息和多行正文；  
    - 页尾的备注区域用于说明该详情线框的用途（例如“展示信息详情阅读流程及等待状态”等）。  

生成 HTML 线框时，整体风格保持「灰度+占位」的 wireframe 风格，不追求像素级还原，而是用于：

- 帮助产品/设计/研发在评审时快速对齐界面结构和状态差异；  
- 为后续高保真设计提供参考基础。

### 9.4 从 PRD 自动识别页面 & 生成多张草图的策略（建议）

在实际使用中，一个功能往往涉及多个页面/状态（例如：列表页 → 详情页 → 弹框/结果页），因此不应只生成一张草图。建议按照以下思路，从已生成的 PRD 中自动识别页面类型，并为每个关键页面生成一个独立的 `ai-wireframe` 区块：

- 识别信息来源：  
  - `4.2 关键流程与状态流转` 中出现的页面/弹框/步骤节点；  
  - `4.4 页面与模块说明` 中按页面/模块列出的项（例如「信息列表页」「信息详情页」「确认弹框」等）；  
  - 正文中出现的关键术语：  
    - 「列表页/列表/信息流/Feed/卡片流」→ 倾向于 `list_page`；  
    - 「详情/内容页面/文章页/信息详情」→ 倾向于 `detail_page`；  
    - 「弹窗/弹框/对话框/确认框/Modal/底部弹出层」→ 倾向于 `modal_page`；  
    - 「设置/配置页/表单/编辑配置」→ 可映射为 `settings_page` 或 `form_page`（后续可扩展模板）。  

- 页面到 wireframe 类型的映射（示例）：  
  - 「信息列表页」「搜索结果列表」「推荐流」→ `list_page`；  
  - 「信息详情页」「内容详情」「文章详情」→ `detail_page`；  
  - 「标记已读确认弹框」「删除确认弹窗」「提示用户操作的对话框」→ `modal_page`；  
  - 「配置项编辑页」「开关设置页」→ `settings_page` / `form_page`（如模板已支持时）。  

- 生成多个 `ai-wireframe` 区块（示例）：  
  - 对于「信息列表已读/未读」这种需求，可自动生成至少两张草图：  
    1. 列表页线框：`type: list_page`，展示未读/已读状态的列表信息流；  
    2. 详情页线框：`type: detail_page`，展示信息详情阅读视图。  
  - 如果还有「标记已读确认弹框」，可追加：  
    3. 弹框线框：`type: modal_page`，展示中部弹框 + 背景遮罩 + 主要/次要按钮。  

智能体在使用本 skill 时，可根据 PRD 文本内容自动枚举这些页面，并在 PRD 末尾追加多个 `ai-wireframe` 区块（每个区块对应一个页面类型和单独的 `output_path`），随后调用脚本一次性生成多张 HTML 草图。

## 10. 与 sky-demand-evaluator 的串联示例（简要）

为了让使用者更容易理解两个 skill 的配合方式，可以参考以下串联流程：

1. 用户或同事提出一条需求/痛点，例如：「APP 首页应该少一些初始化弹框」。  
2. 使用 `sky-demand-evaluator` 对该需求进行真伪和优先级评估，得到结构化输出：  
   - 需求结论标签：真需求；  
   - 实施推荐度评分：例如 70%；  
   - 背后问题与用户目标、用户故事、关键路径、数据与埋点建议等。  
3. 当结论为真需求且评分>50% 时，将上述结构化结果作为本 skill 的输入：  
   - 形式 A：直接把前一个 skill 的输出交给本 skill 继续处理；  
   - 形式 B：按本 skill 要求的字段手动整理后输入。  
4. 本 skill 基于这些信息，生成一份包含：  
   - PRD 元信息；  
   - 背景与目标；  
   - 用户与场景；  
   - 需求范围与方案设计概要；  
   - 数据/埋点/监控设计；  
   - 验收标准与用例；  
   - 风险、依赖与 TODO 汇总；  
   的 PRD 文本草稿。  
5. 如有需要，再将该 PRD 文本交由 `pdf` skill 或其他工具生成最终 PDF 文档。
